# Auto Deploy TUI 界面设计文档

**版本**: 1.0  
**日期**: 2025-11-20  
**项目**: Auto Deploy - TUI 图形化界面设计

---

## 1. 设计概述

### 1.1 设计目标

- **直观易用**: 用户无需阅读文档即可理解界面
- **信息丰富**: 实时展示部署进度、状态和日志
- **响应迅速**: 界面刷新流畅,无明显延迟
- **美观现代**: 使用现代化配色和图标,提升用户体验

### 1.2 技术栈

- **框架**: Textual 0.47.0
- **样式**: Textual CSS (TCSS)
- **颜色**: Rich 库提供的颜色支持
- **图标**: Unicode 字符和 Emoji

---

## 2. 整体布局设计

### 2.1 主界面布局

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  Auto Deploy v0.1.0                           Config: deploy.yml  16:20:15  │ ← Header
├─────────────────────────────────────────────────────────────────────────────┤
│ ┌─ Deployment Nodes ────────────┐ ┌─ Overall Progress ──────────────────┐ │
│ │                                │ │                                      │ │
│ │ 📦 node_01 (192.168.1.1)       │ │  Deployment Progress                 │ │
│ │   ├─ ✓ Java 11    [Completed] │ │  ████████████████░░░░  80%           │ │
│ │   ├─ ⏳ Python 3.9 [Installing]│ │                                      │ │
│ │   └─ ⏸ Zookeeper  [Pending]   │ │  Nodes:  2/3 completed               │ │
│ │                                │ │  Tasks:  8/10 completed              │ │
│ │ 📦 node_02 (192.168.1.2)       │ │  Failed: 0                           │ │
│ │   ├─ ✓ Java 11    [Completed] │ │                                      │ │
│ │   └─ ✓ Python 3.9 [Completed] │ │  Elapsed: 00:05:23                   │ │
│ │                                │ │  Remaining: ~00:01:30                │ │
│ │ 📦 node_03 (192.168.1.3)       │ └──────────────────────────────────────┘ │
│ │   ├─ ⏳ Java 11    [Installing]│                                          │
│ │   ├─ ⏸ Python 3.9 [Pending]   │ ┌─ Task Details ──────────────────────┐ │
│ │   └─ ⏸ Zookeeper  [Pending]   │ │  Current Task:                       │ │
│ │                                │ │  node_01: Installing Python 3.9.0    │ │
│ │                                │ │  Status: Downloading package...      │ │
│ │                                │ │  Progress: 45%                       │ │
│ └────────────────────────────────┘ └──────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────────────┤
│ ┌─ Live Logs ─────────────────────────────────────────────────────────────┐ │
│ │ [16:15:30] [INFO] Starting deployment for 3 nodes                       │ │
│ │ [16:15:31] [INFO] node_01: Running pre-installation checks              │ │
│ │ [16:15:32] [INFO] node_01: ✓ SSH connection successful                  │ │
│ │ [16:15:33] [INFO] node_01: ✓ Disk space sufficient (50GB available)     │ │
│ │ [16:15:34] [INFO] node_01: Installing Java JDK 11...                    │ │
│ │ [16:15:45] [INFO] node_01: ✓ Java 11 installed successfully             │ │
│ │ [16:15:46] [INFO] node_01: Installing Python 3.9.0...                   │ │
│ │ [16:16:20] [WARNING] node_03: Retrying SSH connection...                │ │
│ └──────────────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────────────┤
│ [S]tart  [P]ause  [R]esume  [F]ilter Logs  [Q]uit  [?]Help                 │ ← Footer
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.2 布局区域说明

| 区域 | 位置 | 尺寸 | 功能 |
|------|------|------|------|
| **Header** | 顶部 | 1 行 | 显示应用标题、版本、配置文件名、当前时间 |
| **Node Tree** | 左侧 | 40% 宽度 | 显示节点列表和任务状态树 |
| **Progress Panel** | 右上 | 60% 宽度, 30% 高度 | 显示总体进度和统计信息 |
| **Task Details** | 右中 | 60% 宽度, 20% 高度 | 显示当前任务详情 |
| **Log Viewer** | 底部 | 100% 宽度, 50% 高度 | 实时日志滚动显示 |
| **Footer** | 底部 | 1 行 | 显示快捷键提示 |

---

## 3. 组件详细设计

### 3.1 Node Tree (节点状态树)

#### 状态图标

| 状态 | 图标 | 颜色 | 说明 |
|------|------|------|------|
| Pending | ⏸ | dim (灰色) | 等待执行 |
| Running | ⏳ | yellow (黄色) | 正在执行 |
| Completed | ✓ | green (绿色) | 执行成功 |
| Failed | ✗ | red (红色) | 执行失败 |
| Skipped | ⊘ | dim (灰色) | 已跳过 |
| Warning | ⚠ | orange (橙色) | 警告 |

### 3.2 日志级别颜色

| 级别 | 颜色 | 说明 |
|------|------|------|
| DEBUG | dim (灰色) | 调试信息 |
| INFO | white (白色) | 一般信息 |
| SUCCESS | green (绿色) | 成功信息 |
| WARNING | yellow (黄色) | 警告信息 |
| ERROR | red (红色) | 错误信息 |

---

## 4. 配色方案

### 4.1 暗色主题 (默认)

```
$primary: #00d4aa        /* 青绿色 - 主色调 */
$accent: #00a8cc         /* 蓝色 - 强调色 */
$success: #00ff00        /* 绿色 - 成功 */
$warning: #ffaa00        /* 橙色 - 警告 */
$error: #ff0055          /* 红色 - 错误 */
$background: #0e1419     /* 深灰色 - 背景 */
$surface: #1a1f26        /* 浅灰色 - 表面 */
$text: #e6e6e6           /* 浅色 - 文本 */
```

---

## 5. 快捷键

| 快捷键 | 功能 | 可用状态 |
|--------|------|----------|
| S | 开始部署 | 未开始时 |
| P | 暂停部署 | 运行中 |
| R | 恢复部署 | 已暂停时 |
| F | 过滤日志 | 任何时候 |
| Q | 退出程序 | 任何时候 |
| ? | 显示帮助 | 任何时候 |
| ↑/↓ | 滚动日志 | 任何时候 |

---

**文档结束**
